# HTTP λ©”μ„λ“ ν™μ©



## ν΄λΌμ΄μ–ΈνΈμ—μ„ μ„λ²„λ΅ λ°μ΄ν„° μ „μ†΅



### λ°μ΄ν„° μ „λ‹¬ λ°©μ‹μ€ ν¬κ² 2κ°€μ§€

* **μΏΌλ¦¬ νλΌλ―Έν„°λ¥Ό ν†µν• λ°μ΄ν„° μ „μ†΅**
  * GET
  * μ£Όλ΅ μ •λ ¬ ν•„ν„° , κ²€μƒ‰μ–΄
* **λ©”μ‹μ§€ λ°”λ””λ¥Ό ν†µν• λ°μ΄ν„° μ „μ†΅**
  * POST, PUT, PATCH
  * νμ› κ°€μ…, μƒν’ μ£Όλ¬Έ, λ¦¬μ†μ¤ λ“±λ΅, λ¦¬μ†μ¤ λ³€κ²½



### ν΄λΌμ΄μ–ΈνΈμ—μ„ μ„λ²„λ΅ λ°μ΄ν„° μ „μ†΅ν•λ” 4κ°€μ§€ μƒν™©



#### 1. μ •μ  λ°μ΄ν„° μ΅°ν

μ •μ  λ°μ΄ν„°μ— λ€ν• λ‹¨μ μ΅°ν μ”μ²­ (μΏΌλ¦¬ νλΌλ―Έν„° λ―Έμ‚¬μ©)

```HTTP
GET /static/star.jpg HTTP/1.1
Host: localhost:8080
```

/static/star.jpg

``` HTTP
HTTP/1.1 200 OK
Content-Type: image/jpg
Content-Length: 34012

lkj123kljfalsdkfnlkrnflkn924lsdnfkalsdfk492lfasndflkafnsjk;sdfjasdklfq;4924tlaklsdkf;5tknalskdfjlakj4t62;l6k;a4alk45la235;2a34kla2j34624096alsdkjflk
```

* μ΄λ―Έμ§€, μ •μ  ν…μ¤νΈ λ¬Έμ„
* μ΅°νλ” GET μ‚¬μ©
* μ •μ  λ°μ΄ν„°λ” μΌλ°μ μΌλ΅ μΏΌλ¦¬νλΌλ―Έν„° μ—†μ΄ λ¦¬μ†μ¤ κ²½λ΅λ΅ λ‹¨μν•κ² μ΅°ν κ°€λ¥



#### 2. λ™μ  λ°μ΄ν„° μ΅°ν

**μΏΌλ¦¬ νλΌλ―Έν„° μ‚¬μ©**

```HTTP
GET /search?q=hello&hl=ko HTTP/1.1
Host: www.google.com
```

* μ£Όλ΅ κ²€μƒ‰, κ²μ‹ν λ©λ΅μ—μ„ μ •λ ¬ or ν•„ν„° 
* μ΅°ν μ΅°κ±΄μ„ μ¤„μ—¬μ£Όλ” ν•„ν„°, μ΅°ν κ²°κ³Όλ¥Ό μ •λ ¬ν•λ” μ •λ ¬ μ΅°κ±΄μ— μ£Όλ΅ μ‚¬μ©
* μ΅°νλ” GET μ‚¬μ©
* GETμ€ μΏΌλ¦¬ νλΌλ―Έν„° μ‚¬μ©ν•΄μ„ λ°μ΄ν„°λ¥Ό μ „λ‹¬



#### 3. HTML form μ„ ν†µν• λ°μ΄ν„° μ „μ†΅

**POST μ „μ†΅ - μ €μ¥**

```HTML
<form action="/save" method="post">
  <input type="text" name="username" />
  <input type="text" name="age" />
  <button type="submit">μ „μ†΅</button>
</form>
```

**submit μ΄ λλ” μκ°„** μ›Ή λΈλΌμ°μ €κ°€ λ‹¤μκ³Ό κ°™μ΄ **HTTP λ©”μ‹μ§€λ¥Ό μƒμ„±**ν•΄μ¤

```HTTP
POST /save HTTP/1.1
Host: localhost:8080
Content-Type: application/x-www-form-urlencoded

username=kim&age=20
```

μΏΌλ¦¬ νλΌλ―Έν„°μ™€ λΉ„μ·ν•κ² key, value μ¤νƒ€μΌλ΅ λ°μ΄ν„°λ¥Ό λ§λ“¤κ³  **HTTP bodyλ¥Ό ν†µν•΄ μ„λ²„μ— μ „λ‹¬**



**GET μ „μ†΅ - μ΅°ν**

```html
<form action="/save" method="get">
  <input type="text" name="username" />
  <input type="text" name="age" />
  <button type="submit">μ „μ†΅</button>
</form>
```

μ„μ POSTμ™€ λΉ„μ·ν•κ² **submit μ΄ λλ” μκ°„** μ›ΉλΈλΌμ°μ €κ°€ λ‹¤μκ³Ό κ°™μ΄ **HTTP λ©”μ‹μ§€λ¥Ό μƒμ„±**ν•΄μ¤

```HTTP
GET /members?username=kim&age=20 HTTP/1.1
Host: localhost:8080
```



**multipart/form-data**

```HTML
<form action="/save" method="post" enctype="multipart/form-data">
  <input type="text" name="username" />  
  <input type="text" name="age" />
  <input type="file" name="file1" />
  <button type="submit">μ „μ†΅</button>
</form>
```



<img src="https://user-images.githubusercontent.com/52594760/138897018-0124f81a-d640-4b1e-8588-5501d821e3bd.png" alt="image" style="zoom:80%;" />

μ»¨ν…νΈ νƒ€μ… ; λ©€ν‹°ννΈ/νΌ λ°μ΄ν„° κ·Έλ¦¬κ³  κµ¬λ¶„μ„ μΈ λ°”μ΄λ”λ¦¬( μ›Ή λΈλΌμ°μ €μ—μ„ μλ™μ μΌλ΅ μƒμ„± )

μ„ μ²λΌ username, age, file λ“±μ— λ€ν•΄ κµ¬λ¶„μ„ λ‚λ„κ³  μ—¬λ¬κ°μ μ»¨ν…νΈμ— λ€ν• μ „μ†΅μ„ ν•  μ μλ‹¤.



**μ •λ¦¬**

* HTML Form submitμ‹ POST μ „μ†΅
  * μ) νμ›κ°€μ…, μƒν’ μ£Όλ¬Έ, λ°μ΄ν„° λ³€κ²½
* Content-Type: application/x-www-form-urlencoded μ‚¬μ©
  * form λ‚΄μ©μ„ λ©”μ‹μ§€ λ°”λ””λ¥Ό ν†µν•΄μ„ μ „μ†΅ (key=value, μΏΌλ¦¬ νλΌλ―Έν„° ν•μ‹)
  * μ „μ†΅ λ°μ΄ν„°λ¥Ό url encoding μ²λ¦¬
    * μ) abcκΉ€ -> abc%EA%B9%80 (UTF-8)
* HTML formμ€ GET μ „μ†΅λ„ κ°€λ¥
* Content-Type: multipart/form-data
  * νμΌ μ—…λ΅λ“ κ°™μ€ λ°”μ΄λ„λ¦¬ λ°μ΄ν„° μ „μ†΅μ‹ μ‚¬μ©
  * λ‹¤λ¥Έ μΆ…λ¥μ μ—¬λ¬ νμΌκ³Ό νΌμ λ‚΄μ© ν•¨κ» μ „μ†΅ κ°€λ¥ (κ·Έλμ„ μ΄λ¦„μ΄ multipart μ΄λ‹¤.)
* **μ¤‘μ”! π’¥ HTML form μ „μ†΅μ€** GET, POST λ§ μ§€μ›





#### 4. HTTP APIλ¥Ό ν†µν• λ°μ΄ν„° μ „μ†΅

λ‹¨μ HTTP API λ¥Ό ν†µν•΄ λ©”μ‹μ§€ λ°”λ””λ¥Ό json ν•μ‹μΌλ΅ ν•κ³  μ»¨ν…νΈ νƒ€μ…μ„ `application/json` μΌλ΅ μ„¤μ •ν•΄μ„ POST λ©”μ„λ“λ΅ μ „μ†΅ν•΄ μ¤€λ‹¤.

```HTTP
POST /members HTTP/1.1Content-Type: application/json{	"username": "young",	"age": 20}
```



**μ •λ¦¬**

* μ„λ²„ to μ„λ²„ (μ„λ²„λΌλ¦¬ ν†µμ‹ )
  * λ°±μ—”λ“ μ‹μ¤ν… ν†µμ‹  ν•  λ• μ‚¬μ© (μ„λ²„μ—λ” HTML κ°™μ€ λ¬Έλ²•μ„ μ“Έ μ μ—†μ)
* μ•± ν΄λΌμ΄μ–ΈνΈ
  * μ•„μ΄ν°, μ•λ“λ΅μ΄λ“ μ—μ„ μ‚¬μ© (μ„λ²„μ™€ λ§μ°¬κ°€μ§€ μ΄μ )
* μ›Ή ν΄λΌμ΄μ–ΈνΈ
  * HTML μ—μ„ form μ „μ†΅ λ€μ‹  μλ°” μ¤ν¬λ¦½νΈλ¥Ό ν†µν• ν†µμ‹ μ— μ‚¬μ© (Ajax) λΉ„λ™κΈ° js & xml μ”μ¦μ—” λ‹¤ jsonν•μ‹ μ”€
  * μ) React, Vue.js κ°™μ€ μ›Ή ν΄λΌμ΄μ–ΈνΈμ™€ API ν†µμ‹ 
* POST, PUT, PATCH: λ©”μ‹μ§€ λ°”λ””λ¥Ό ν†µν•΄ λ°μ΄ν„° μ „μ†΅
* GET: μ΅°ν, μΏΌλ¦¬ νλΌλ―Έν„°λ΅ λ°μ΄ν„° μ „λ‹¬
* Content-Type: application/jsonμ„ μ£Όλ΅ μ‚¬μ© (**μ‚¬μ‹¤μƒ ν‘μ¤€**)
  * TEXT, XML, JSON λ“±λ“± μμ





## HTTP API μ„¤κ³„ μμ‹

## **νμ›κ΄€λ¦¬ μ‹μ¤ν…**

### API μ„¤κ³„ - POST κΈ°λ° λ“±λ΅ 

* **νμ›** λ©λ΅ /members  : **GET**
* **νμ›** λ“±λ΅ /members : **POST**
* **νμ›** μ΅°ν /members/{id} : **GET**
* **νμ›** μμ • /members/{id} : **PATCH, PUT, POST** μμ •μ‚¬ν•­μ€ κ³ λ―Όν•΄λ³΄κ³  μ‚¬μ©ν•  λ©”μ„λ“λ¥Ό κ³¨λΌμ•Ό ν•μ§€λ§ μΌλ°μ μΌλ΅ **PATCH** κ°€ μ΄μƒμ μ„ , ex) κ²μ‹νμ κ²μ‹κΈ€μ„ λ‹¤μ‹ μ“°λ” κ²½μ°λ” **PUT** μ„ μ“Έλ§ν•λ‹¤. ν•μ§€λ§ μ΄ λ‘κ° λ¨λ‘ μ• λ§¤ν•  λ• **POST** λ¥Ό μ‚¬μ©ν•λ©΄ λ
* **νμ›** μ‚­μ  /members/{id} : **DELETE**



#### - POST - μ‹ κ· μμ› λ“±λ΅ νΉμ§•

* ν΄λΌμ΄μ–ΈνΈλ” λ“±λ΅λ  λ¦¬μ†μ¤μ URIλ¥Ό λ¨λ¥Έλ‹¤

  * νμ›λ“±λ΅μ‹ /members uriμ— POST λ©”μ„λ“λ΅ λ³΄λ‚Έλ‹¤

* μ„λ²„κ°€ μƒλ΅ λ“±λ΅λ λ¦¬μ†μ¤ URI λ¥Ό μƒμ„±ν•λ‹¤.

  * HTTP/1.1 201 Created

    Location: **/members/100**

* μ΄λ¬ν• ν•μ‹μ„ μ»¬λ ‰μ…(Collection) μ΄λΌκ³  ν•λ‹¤

  * μ„λ²„κ°€ κ΄€λ¦¬ν•λ” λ¦¬μ†μ¤ λ””λ ‰ν† λ¦¬
  * μ„λ°”κ°€ URIλ¥Ό μƒμ„±ν•κ³  κ΄€λ¦¬
  * μ—¬κΈ°μ„ μ»¬λ ‰μ…μ€ /members

  

---

## νμΌ κ΄€λ¦¬ μ‹μ¤ν…

### API μ„¤κ³„ - PUT κΈ°λ° λ“±λ΅

* **νμΌ** λ©λ΅ /files : **GET**
* **νμΌ** μ΅°ν /files/{filename} : **GET**
* **νμΌ** λ“±λ΅ /files/{filename} : **PUT**
* **νμΌ** μ‚­μ  /files/{filenmae} : **DELETE**
* **νμΌ** λ€λ‰ λ“±λ΅ /files/{filename} : **POST**



#### - PUT - μ‹ κ· μμ› λ“±λ΅ νΉμ§•

* ν΄λΌμ΄μ–ΈνΈκ°€ λ¦¬μ†μ¤ URIλ¥Ό μ•κ³  μμ–΄μ•Ό ν•λ‹¤.
  * νμΌ λ“±λ΅ /files/{filename} : **PUT**
  * PUT **/files/star.jpg**
* ν΄λΌμ΄μ–ΈνΈκ°€ μ§μ ‘ λ¦¬μ†μ¤μ URIλ¥Ό μ •ν•λ‹¤.
* μ΄λ° ν•μ‹μ„ μ¤ν† μ–΄(Store) λΌκ³  ν•λ‹¤.
  * ν΄λΌμ΄μ–ΈνΈκ°€ κ΄€λ¦¬ν•λ” λ¦¬μ†μ¤ μ €μ¥μ†
  * ν΄λΌμ΄μ–ΈνΈκ°€ λ¦¬μ†μ¤μ URIλ¥Ό μ•κ³  κ΄€λ¦¬
  * μ—¬κΈ°μ„ μ¤ν† μ–΄λ” /files



> μ‹¤λ¬΄μ—μ„λ” λ€λ¶€λ¶„ **POST κΈ°λ°μ μ»¬λ ‰μ…μ„ λ§μ΄ μ“΄λ‹¤** 



## HTML form μ‚¬μ©

* HTML formμ€ **GET, POST λ§ μ§€μ›**
* Ajax κ°™μ€ κΈ°μ μ„ μ‚¬μ©ν•΄μ„ ν•΄κ²° κ°€λ¥ : νμ› API μ°Έκ³ 
* μ—¬κΈ°μ„λ” μμ HTML, HTML form κΈ°λ°μΌλ΅ μ„¤λ…
* GET, POST λ§ μ§€μ›ν•λ―€λ΅ μ μ•½μ΄ μμ



* **νμ›** λ©λ΅ /members : **GET**
* **νμ›** λ“±λ΅ νΌ /members/**new** : **GET**
  * μμ •μ„ ν•κΈ°μ„ν• form μμ²΄λ¥Ό λ¶λ¬μ¤κΈ° μ„ν•΄ GET μ„ μ“΄λ‹¤. μ‹¤μ λ΅ λ°μ΄ν„°μ λ³€κ²½μ΄ μΌμ–΄λ‚λ” κ²ƒμ΄ μ•„λ‹
* **νμ›** λ“±λ΅ /members/**new**, /members : **POST**
  * validation ν•μ§€ μ•μ„ λ• refresh λλ” κ²ƒμ„ ν”Όν•κΈ° μ„ν•΄ **λ“±λ΅ νΌ**κ³Ό  **λ“±λ΅** μ URIλ¥Ό λ™μΌν•κ² μ„¤κ³„ν•λ” κ²ƒμ΄ μ„ νΈλλ‹¤. μ‚¬λμ— λ”°λΌ λ‹¤ λ‹¤λ¦„
* **νμ›** μ΅°ν /members/{id} : **GET**
* **νμ›** μμ • νΌ /members/{id}/**edit** : **GET**
* **νμ›** μμ • /members/{id}/**edit**, /members/{id} : **POST**
  * μ„μ λ“±λ΅ νΌκ³Ό λ§μ°¬κ°€μ§€
* **νμ›** μ‚­μ  /members/{id}/**delete** : **POST**
  * μ‚­μ μ—  DELETE λ©”μ„λ“λ¥Ό μ‚¬μ©ν•λ©΄ μΆ‹κ² μ§€λ§ μ μ•½μΌλ΅ μΈν•΄ **λ™μ‚¬ν• URIλ¥Ό μ“΄λ‹¤.**



#### - μ»¨νΈλ΅¤ URI

* HTML formμ€ **GET, POST** λ§ μ§€μ›ν•κΈ° λ•λ¬Έμ— μ μ•½μ΄ μμ
* μ΄λ° μ μ•½μ„ ν•΄κ²°ν•κΈ° μ„ν•΄ **λ™μ‚¬λ΅ λ λ¦¬μ†μ¤** κ²½λ΅ μ‚¬μ©
  * λ°μ΄ν„°λ¥Ό μ΅°μ‘(λ³€κ²½) ν•κΈ° λ•λ¬Έμ— λ™μ‚¬λ΅ ν‘ν„ν•λ‹¤!
* μ„μ /new, /edit, /deleteλ¥Ό **μ»¨νΈλ΅¤ URI** λΌκ³  ν•λ‹¤.
* HTTP λ©”μ„λ“λ΅ ν•΄κ²°ν•κΈ° μ• λ§¤ν• κ²½μ° μ‚¬μ© (HTTP API ν¬ν•¨)



β… μµλ€ν• λ¦¬μ†μ¤ λ‹¨μ„μ κ°λ…μΌλ΅  URIλ¥Ό μ„¤κ³„ν•κ³  μ΄λ¬ν• μ μ•½μ΄ μμ„λ• μ»¨νΈλ΅¤ URIλ¥Ό μ‚¬μ©ν•λ‹¤κ³  μƒκ°ν•μ

λν• μ»¨νΈλ΅¤ URI



## μ •λ¦¬

* HTTP API - μ»¬λ ‰μ…
  * POST κΈ°λ° λ“±λ΅
  * μ„λ²„κ°€ λ¦¬μ†μ¤ URI κ²°μ •
* HTTP API - μ¤ν† μ–΄
  * PUT κΈ°λ° λ“±λ΅
  * ν΄λΌμ΄μ–ΈνΈκ°€ λ¦¬μ†μ¤ URI κ²°μ •
* HTML form μ‚¬μ©
  * μμ HTML, HTML form μ‚¬μ©
  * GET, POSTλ§ μ§€μ› (μ μ•½)
  * λ”°λΌμ„ μ»¨νΈλ΅¤ URI μ‚¬μ©



### μ°Έκ³ ν•λ©΄ μΆ‹μ€ URI μ„¤κ³„ κ°λ…

* **λ¬Έμ„(document)**
  * **λ‹¨μΌ κ°λ… (νμΌ ν•λ‚, κ°μ²΄ μΈμ¤ν„΄μ¤, λ°μ΄ν„°λ² μ΄μ¤ row)**
  * **μ) /members/100, /files/star.jpg** 
* **μ»¬λ ‰μ…(collection)**
  * **μ„λ²„κ°€ κ΄€λ¦¬ν•λ” λ¦¬μ†μ¤ λ””λ ‰ν„°λ¦¬**
  * **μ„λ²„κ°€ λ¦¬μ†μ¤μ URIλ¥Ό μƒμ„±ν•κ³  κ΄€λ¦¬** 
  * **μ) /members**
* **μ¤ν† μ–΄(store)**
  * **ν΄λΌμ΄μ–ΈνΈκ°€ κ΄€λ¦¬ν•λ” μμ› μ €μ¥μ†**
  * **ν΄λΌμ΄μ–ΈνΈκ°€ λ¦¬μ†μ¤μ URIλ¥Ό μ•κ³  κ΄€λ¦¬** 
  * **μ) /files**
* **μ»¨νΈλ΅¤λ¬(controller), μ»¨νΈλ΅¤ URI**
  * **λ¬Έμ„, μ»¬λ ‰μ…, μ¤ν† μ–΄λ΅ ν•΄κ²°ν•κΈ° μ–΄λ ¤μ΄ μ¶”κ°€ ν”„λ΅μ„Έμ¤ μ‹¤ν–‰**
  *  **λ™μ‚¬λ¥Ό μ§μ ‘ μ‚¬μ©**
  * **μ) /members/{id}/delete**