# HTTP 기본

HTTP : **H**yper **T**ext **T**ransfer **P**rotocol



## 모든 것이 HTTP



### HTTP 메시지에 모든것을 전송

* HTML, TEXT
* IMAGE, 음성, 영상, 파일
* JSON, XML (API)
* 거의 모든 형태의 데이터 전송 가능
* 서버간에 데이터를 주고 받을 때도 대부분 HTTP 사용



### HTTP 역사

* **HTTP/1.1 1997년: 가장 많이 사용, 우리가 대부분 사용함**
  * RFC2078(1997) -> RFC2616(1999)**\*** -> RFC7230~7235(2014)
* HTTP/2 2015년: 성능개선
* HTTP/3 진행중 : UDP 연결중심, 성능개선



### 기반 프로토콜

* **TCP** : HTTP/1.1, HTTP/2
* **UDP**: HTTP/3
* 현재 HTTP/1.1 주로 사용



### HTTP 특징

* **클라이언트 서버 구조**
* 무상태 프로토콜(스테이트리스 ) 지향, 비연결성
* HTTP 메시지를 통해서 통신
* 단순하며 확장 가능함



## 클라이언트 서버 구조

* Request, Response 구조
* 클라이언트는 서버에 요청을 보내고, 응답을 대기
* 서버가 요청에 대한 결과를 만들어서 응답

![image](https://user-images.githubusercontent.com/52594760/137628632-c9a65ef7-605e-489e-bdb1-192a61b82fe9.png)

클라이언트와 서버를 분리하는게 중요함.

비지니스 로직, 데이터는 서버에서 중심으로 작업하고

클라이언트는 UI와 사용성을 중심으로 작업함

이렇게 되면 클라이언트와 서버가 독립적으로 진화할 수 있음. 서버의 트래픽이 폭주할때 클라이언트는 손댈 필요가없음. REST하다는 것이 이런 느낌



## Stateful, Stateless

### 무상태 프로토콜 (Stateless)

* 서버가 클라이언트의 상태를 보존하지 않음
* 장점 : 서버 확장성 높음 (스케일 아웃)
* 단점 : 클라이언트가 추가 데이터 전송



개념이 확 와닿지 않는다면 우선 **Stateful** 과 **Stateless**의 차이를 먼저 확인해보자.

### Stateful과 Stateless의 차이

실제로 서버가 바뀌는 것은 아니고 비유. 고객과 점원(A, B, C)

* Stateful : 상태유지 중간에 서버가 바뀌면 안된다. (중간에 서버가 바뀌면 상태 정보를 다른 서버에 미리 알려줘야 한다.)
* Stateless: 중간에 다른 서버로 바뀌어도 된다.
  * 갑자기 클라이언트가 증가해서 서버에 요청이 많이 들어와도 서버의 수를 늘릴 수 있다.
* 무상태는 응답 서버를 쉽게 바꿀 수 있다 -> **무한한 서버 증설 가능**



### 상태 유지 - Stateful

![image](https://user-images.githubusercontent.com/52594760/137629701-5bef64c7-e442-421a-8496-e6e94e82a32c.png)

만약 서버 1번이 장애가 생기면 다시 서버2에 요청을 다시해야함.



### 무상태 - Stateless

![image](https://user-images.githubusercontent.com/52594760/137629791-991cf134-e66c-46b7-99c1-38dd2ca3e81f.png)

상태를 보관하지 않기 때문에 아무 서버나 호출해도 된다.

#### 무상태의 장점

![image](https://user-images.githubusercontent.com/52594760/137629836-e1848050-1e74-48c9-9a59-1f2d0ab4bcb7.png)

서버를 늘리는데 유리하다. 하지만 무조건 무상태로 설계하는것이 좋은건 아니다 필요에 따라 선택해야함.

### 무상태(Statless)의 실무 한계

* 모든 것을 무상태로 설계할 수 있는 경우도 있고 없는 경우도 있다.
* 무상태
  * 로그인이 필요없는 단순한 서비스 소개화면
* 상태 유지가 필요한 서비스
  * 로그인 (브라우저의 쿠키, 세션을 유지해서 stateful하게 만들어 줄 수 있음 (실제로 Stateful은 아님))
* 로그인한 사용자의 경우 로그인 했다는 상태를 서버에 유지
* 일반적으로 브라우저 쿠키와 서버 세션등을 사용해서 상태를 유지한다.
* 상태 유지는 최소한만 사용하는 것이 좋다.



## 비 연결성(connectionless)



## HTTP 메시지

